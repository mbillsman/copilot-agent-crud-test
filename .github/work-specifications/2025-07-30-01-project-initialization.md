# Phase: Product Initialization

## Instructions for Copilot Agent

Please initialize the project using the instructions found in this PRD. Please try to complete requirements one at a time if possible and update the requirement status as you are working. If there are missing dependencies or MCP servers please let me know and let's try to get them installed and working. Otherwise if you need any clarification please don't hesitate to ask.

## Overview

- **Objective:** Initialize the project with a backend and frontend skeleton codebase and a CI/CD pipeline for the 3 environments (Development, Staging and Production)
- **Scope:**
  - Create a repo to hold the project
  - Initialize the project with Aspire
  - Initialize an ASP.NET API including unit tests
  - Initialize a Postgres database
  - Initialize a React app including unit tests
  - Initialize end-to-end tests
  - Create a Bicep configuration for the infrastructure required for the 2 supported non-local environments and then create the required infrastructure in Azure
  - Create a CI/CD pipeline for pull requests
  - Create CI/CD pipelines for deployments to the Staging and Production environments

---

## Requirements

| ID          | Requirement Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Status      | Acceptance Criteria                                                                                                                                                                                                                                                                                                                                                                                                                     | Notes                                                                                     |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| R2025073001 | Create a git repo called copilot-agent-crud-test and push it to my github account.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Completed   | When I navigate to github.com and see the repositories for my profile then I will see the repo created in my list of repositories.                                                                                                                                                                                                                                                                                                      | ✅ Repository created successfully on GitHub and pushed.                                  |
| R2025073002 | Create a project with Aspire that includes an ASP.NET backend and a React front end.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Completed   | When I navigate to this project in VS Code then I will see the various folders and files associated with an Aspire application. There will be an app host folder. There will be a client folder. There will be an API folder. There will be a service defaults folder.                                                                                                                                                                  | ✅ Aspire project structure created with AppHost, API, ServiceDefaults, and React client. |
| R2025073003 | Ensure that the Aspire program is configured to run and use a PostgreSQL container when the application is run locally.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | In Progress | When I check to see what docker containers are running then I will see the PostgreSQL container running locally.                                                                                                                                                                                                                                                                                                                        |                                                                                           |
| R2025073005 | "Create the initial EF Core migration for the PostgreSQL database and a table called stuff that will have 3 columns: id, name and description. Start up the PostgreSQL container locally and run the migration script against the database to initialize it. "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Completed   | When I connect to the PostgreSQL database then I will see the table called stuff with 3 columns.                                                                                                                                                                                                                                                                                                                                        | ✅ EF Core migration created with stuff table (Id, Name, Description columns)             |
| R2025073006 | Create an ASP.NET API project skeleton with an unauthenticated /stuff endpoint that supports pagination and returns pages of 10 rows of the stuff database table.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Completed   | "Assuming the database is populated with 12 rows of test data, when I make a GET call to the /stuff endpoint for the first page of data then it returns 10 items of test data. Then when I make a GET call to the /stuff endpoint for the second page of data then it returns the next 2 items of data. "                                                                                                                               | ✅ StuffController implemented with GET /stuff pagination endpoint (10 items per page)    |
| R2025073007 | Create an xUnit integration test project for the API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Completed   | When I navigate to this project in VS Code then I will see the folder for an integration test project.                                                                                                                                                                                                                                                                                                                                  | ✅ StuffManager.Api.Tests project created with xUnit framework                           |
| R2025073008 | Create an integration test with an in-memory SQLite database that has the migrations run against it and is initialized with 12 rows of stuff in it and verifies that the first page of the /stuff endpoint only returns the first 10 rows and that the second page of the /stuff endpoint returns the last 2 rows.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | In Progress | When I run the tests for the API project then I will see the tests pass.                                                                                                                                                                                                                                                                                                                                                                | Tests implemented but need Aspire configuration fixes to run successfully               |
| R2025073009 | Create a React client project skeleton with a Stuff List page that shows the first page of stuff from the /stuff endpoint in a table with headers. The Stuff List page will also have a header.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Not Started | When I navigate to the client website in my browser then I will see a page header and an empty table of stuff.                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| R2025073010 | Create a React Testing Library test for the Stuff List page that verifies the page will render a page of stuff and allow the user to navigate through the pages of their stuff.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Not Started | When I run the tests for the client project then I will see the tests pass.                                                                                                                                                                                                                                                                                                                                                             | Use a real Redux store in the tests and only mock the fetch calls.                        |
| R2025073011 | Create an end-to-end Playwright test for the Stuff List page that verifies the page will render a page of stuff and allow the user to navigate through the pages of their stuff.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Not Started | When I run the end-to-end tests for the project then I will see the tests pass.                                                                                                                                                                                                                                                                                                                                                         |                                                                                           |
| R2025073012 | "Create a Bicep file that can be used to create the infrastructure that is shared across all environments. It should at least configure the creation of the Azure Container Registry. If there are any other resources that you think should be created that are used by all environments, please add the configuration to do so. "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Not Started | When I look at my solution folder structure then there should be a Bicep file and related configuration for shared infrastructure in an infrastructure folder.                                                                                                                                                                                                                                                                          |                                                                                           |
| R2025073013 | "Create a Bicep file that can be used to create the Testing and Production environments for the Stuff Manager application. It should configure the creations for at least the Azure Database for PostgreSQL for the database, the Azure Container Apps for hosting the ASP.NET API, the Azure Static Web App for hosting the React Application. If there are any other resources that you think should be used please add them. "                                                                                                                                                                                                                                                                                                                                                                                                                                 | Not Started | When I look at my solution folder structure then there should be a Bicep file and related configuration for shared infrastructure in an infrastructure folder.                                                                                                                                                                                                                                                                          |                                                                                           |
| R2025073014 | "Using the Bicep files, create the required infrastructure for the Testing and Production environments. "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Not Started | When I list my Azure resources then I should see the shared resources and the Testing and Production specific resources listed.                                                                                                                                                                                                                                                                                                         |                                                                                           |
| R2025073015 | Use eslint and prettier and create eslint and prettier configuration and ensure the recommended VS Code plugins for eslint and prettier are suggested to all developers who pull this repo and work on this solution in VS Code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Not Started | When I edit the JavaScript code for my application then the eslint errors are shown in real time. When I save JavaScript files then the formatting occurs automatically and the eslint errors that can be automatically fixed are fixed automatically. When I download the repo for the first time and open it using VS Code and I don't have the recommended plugins then it will be suggested that I install the recommended plugins. |                                                                                           |
| R2025073016 | Create a git pre-commit hook that runs prettier and fixes all lint issues on the front end code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Not Started | When I commit code to my repo then my code is formatted using Prettier and all lint issues that can be automatically fixed are fixed.                                                                                                                                                                                                                                                                                                   |                                                                                           |
| R2025073017 | "Use csharpier, Roslyn Analyzers and .editorconfig to provide consistent formatting of code and enfoce common C# code quality rules. "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Not Started | When I edit the C# code for my application then the C# best practices that I'm not following are shown in real time. When I save C# files then the automatic formatting of                                                                                                                                                                                                                                                              |                                                                                           |
| R2025073018 | "Create a git pre-commit hook that runs csharpier, Roslyn Analyzers and .editorconfig on the API code. "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Not Started | When I commit code to my repo then my code is formatted code quality rules are checked against the C# codebase.                                                                                                                                                                                                                                                                                                                         |                                                                                           |
| R2025073019 | "Create a PR pipeline for all PRs to the develop branch or to any feature branch that will block merging if the checks don't pass. The checks that could block the PR merge should be (1) the build fails (2) the code formatter rules from Prettier and csharpier are not followed (3) the static analysis checks done by eslint, Roslyn Analyzers and .editorconfig fail (4) the automated Xunit or React Testing Library tests fail."                                                                                                                                                                                                                                                                                                                                                                                                                          | Not Started | When I open a PR from the feature branch to the develop branch or from my working branch to the feature branch then I will see the PR pipeline working and be able to check the status of each step of the pipeline from the github web site.                                                                                                                                                                                           |                                                                                           |
| R2025073020 | "Create a PR pipeline for all PRs into the main branch that will block merging if the checks don't pass. The checks that could block the PR merge should be (1) the build fails (2) the code formatter rules from Prettier and csharpier are not followed (3) the static analysis checks done by eslint, Roslyn Analyzers and .editorconfig fail (4) the automated Xunit or React Testing Library tests fail (5) the end to end Playwright tests running against the Testing environment fail "                                                                                                                                                                                                                                                                                                                                                                   | Not Started | When I open a PR from the develop then I will see the PR pipeline working and be able to check the status of each step of the pipeline from the github web site.                                                                                                                                                                                                                                                                        |                                                                                           |
| R2025073021 | "Create a Testing Build and Deploy pipeline that is triggered by any successful PR merge into the develop branch to deploy the application to the Testing environment. For the API application, it should (1) build the API application (2) package the API application into a deployable artifact (3) publish the artifact to the container registry (4) deploy the container to the Azure Container App. For the frontend application it should (1) build the React application (2) package the React application into a deployable artifact (3) publish the artifact to a reasonable location (4) deploy the React application as static files to Azure Static Web Apps. After the application is deployed the Playwright end-to-end tests should be run against the deployed application and if there are any failures, then developers should be notified. " | Not Started | When I merge a PR into the develop branch the application will automatically get deployed to the Testing environment.                                                                                                                                                                                                                                                                                                                   |                                                                                           |
| R2025073022 | "Create a Production Build and Deploy pipeline that is triggered by any successful PR merge into the main branch to deploy the application to the Production environment. For the API application, it should (1) build the API application (2) package the API application into a deployable artifact (3) publish the artifact to the container registry (4) deploy the container to the Azure Container App. For the frontend application it should (1) build the React application (2) package the React application into a deployable artifact (3) publish the artifact to a reasonable location (4) deploy the React application as static files to Azure Static Web Apps. "                                                                                                                                                                                  | Not Started | When I merge a PR into the main branch the application will automatically get deployed to the Production environment.                                                                                                                                                                                                                                                                                                                   |                                                                                           |

---

## Out of Scope

- Creating any actual functionality is out of scope. This phase will just initialize the repo and the infrastructure and the CI/CD pipelines.

---

## Dependencies & Risks

- **Dependencies:** The correct MCP servers being installed an up and running. If there are any missing or incorrectly configured let me know and prompt me to install them.
- **Risks:** None

---

> _Document version: [v1.0]_
